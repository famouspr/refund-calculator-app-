<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Refund Calculator</title>
  <style>
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#0f172a;background:#fff}
    .wrap{padding:8px 10px;max-width:100%}
    .card{border:1px solid #e2e8f0;border-radius:10px;padding:8px}
    label{display:block;font-size:12px;color:#475569;margin:0 0 4px}
    input[type="number"]{width:100%;padding:7px 9px;border:1px solid #cbd5e1;border-radius:8px;font-size:14px;background:#fff}
    input[type="number"]:focus{outline:2px solid #94a3b8;border-color:#94a3b8}
    .result{margin-top:8px;padding:8px;border-radius:8px;background:#f1f5f9;border:1px solid #e2e8f0;font-size:13px}
    .line{display:flex;justify-content:space-between;gap:8px}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    .note{font-size:11px;color:#64748b;margin-top:6px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <label for="amount">Original Amount (<span id="cur1">$</span>)</label>
      <input id="amount" type="number" step="0.01" min="0" placeholder="e.g., 159.20" />
      <div class="result">
        <div class="line"><strong>Total fee (<span id="pctLabel">2.9</span>% + <span id="cur2">$</span><span id="flatLabel">0.30</span>):</strong><span class="mono" id="fee">$0.00</span></div>
        <div class="line"><strong>Refund amount:</strong><span class="mono" id="refund">$0.00</span></div>
      </div>
      <div class="note">Fees are non-refundable.</div>
    </div>
  </div>

  <script>
    const qs = new URLSearchParams(location.search);
    const pct = parseFloat(qs.get('pct') || '2.9');
    const flat = parseFloat(qs.get('flat') || '0.30');
    const cur  = (qs.get('cur') || '$');

    document.getElementById('pctLabel').textContent = isFinite(pct) ? pct : 2.9;
    document.getElementById('flatLabel').textContent = isFinite(flat) ? flat.toFixed(2) : '0.30';
    document.getElementById('cur1').textContent = cur;
    document.getElementById('cur2').textContent = cur;

    const amt = document.getElementById('amount');
    const feeEl = document.getElementById('fee');
    const refundEl = document.getElementById('refund');

    function fmt(n){ return `${cur}${(isFinite(n)? n:0).toFixed(2)}`; }

    function calc(){
      const A = parseFloat(amt.value || '0');
      const fee = +(A * (pct/100) + flat).toFixed(2);
      const refund = +(A - fee).toFixed(2);
      feeEl.textContent = fmt(fee);
      refundEl.textContent = fmt(Math.max(refund,0));
    }
    ['input','change','keyup'].forEach(evt => amt.addEventListener(evt, calc));
    calc();
  </script>
</body>
</html>
